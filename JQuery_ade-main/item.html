<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>GadgetEssence - Manage Items</title>
    
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      crossorigin="anonymous"
    />
    
    <!-- Custom Styles for Pagination -->
    <style>
        .search-container {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            border-radius: 15px;
            border: 2px solid rgba(102, 126, 234, 0.1);
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.1);
        }
        
        .filter-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            border: 2px solid rgba(102, 126, 234, 0.1);
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.1);
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-active {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-inactive {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .category-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .category-smart-home {
            background-color: #e3f2fd;
            color: #1565c0;
        }
        
        .category-mobile-wearable {
            background-color: #f3e5f5;
            color: #7b1fa2;
        }
        
        .category-computers-peripherals {
            background-color: #e8f5e8;
            color: #2e7d32;
        }
        
        .category-gaming-vr {
            background-color: #fff3e0;
            color: #ef6c00;
        }
        
        .category-audio-entertainment {
            background-color: #fce4ec;
            color: #c2185b;
        }
        
        .pagination .page-link {
            color: #667eea;
            border-color: #dee2e6;
        }
        
        .pagination .page-item.active .page-link {
            background-color: #667eea;
            border-color: #667eea;
        }
        
        .pagination .page-link:hover {
            color: #764ba2;
            background-color: #e9ecef;
            border-color: #dee2e6;
        }
        
        .item-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }
        
        .item-description {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>

    <!-- SweetAlert2 CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.16.1/sweetalert2.css"
      integrity="sha512-fjO3Vy3QodX9c6G9AUmr6WuIaEPdGRxBjD7gjatG5gGylzYyrEq3U0q+smkG6CwIY0L8XALRFHh4KPHig0Q1ug=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css" />
    
    <!-- jQuery -->
    <script
      src="https://code.jquery.com/jquery-3.6.4.min.js"
      integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
      crossorigin="anonymous"
    ></script>
    
    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    
    <!-- Pagination Utility -->
    <script src="js/pagination-utility.js"></script>
    
    <!-- SweetAlert2 JS -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.16.1/sweetalert2.min.js"
      integrity="sha512-LGHBR+kJ5jZSIzhhdfytPoEHzgaYuTRifq9g5l6ja6/k9NAOsAi5dQh4zQF6JIRB8cAYxTRedERUF+97/KuivQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- Custom JS -->
    <script src="js/item.js"></script>
    <script src="js/auth-checker.js"></script>
    <script src="js/refresh-utility.js"></script>
  </head>

  <body>
    <div id="header"></div>
    <script>
      $("#header").load("header.html", function() {
        if (!sessionStorage.getItem('userId')) {
          // Hide Profile menu if not logged in
          $('a.nav-link[href="profile.html"]').closest('.nav-item').hide();
          // Show Register and Login
          $('a.nav-link[href="register.html"]').closest('.nav-item').show();
          $('a.nav-link[href="login.html"]').closest('.nav-item').show();
        } else {
          // If logged in, show Profile, hide Register, change Login to Logout
          $('a.nav-link[href="profile.html"]').closest('.nav-item').show();
          $('a.nav-link[href="register.html"]').closest('.nav-item').hide();
          const $loginLink = $('a.nav-link[href="login.html"]');
          $loginLink.text('Logout').attr({ 'href': '#', 'id': 'logout-link' }).on('click', function (e) {
            e.preventDefault();
            sessionStorage.clear();
            window.location.href = 'login.html';
          });
        }
      });
    </script>
    
    <div class="container gadget-admin-container" id="adminItemsContainer">
      <h1 class="mb-4 gadget-admin-title">
        <i class="fas fa-microchip" style="color: #00d4ff; margin-right: 15px;"></i>
        Manage Items
        <small class="d-block" style="font-size: 0.6em; color: #7f8c8d; margin-top: 5px;">Admin - Electronics & Gadgets Inventory</small>
      </h1>
      
      <!-- Add Item Button Section -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="gadget-admin-actions-bar">
            <button type="button" class="btn gadget-btn-add-item" data-toggle="modal" data-target="#itemModal" id="addItemBtn">
              <i class="fas fa-plus-circle me-2"></i>
              <span class="btn-text">Add New Item</span>
              <div class="btn-ripple"></div>
            </button>
          </div>
        </div>
      </div>

      <!-- Search Bar -->
      <div class="row mb-4">
        <div class="col-md-12">
          <div class="search-container p-3">
            <div class="input-group">
              <input type="text" class="form-control" id="searchInput" placeholder="Type to search items in real-time...">
              <div class="input-group-append">
                <button class="btn btn-primary" type="button" id="searchBtn">
                  <i class="fas fa-search"></i> Search
                </button>
                <button class="btn btn-secondary" type="button" id="clearSearchBtn">
                  <i class="fas fa-times"></i> Clear
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filter-card card mb-4">
        <div class="card-header">
          <h5 class="mb-0">
            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#filterCollapse" aria-expanded="false" aria-controls="filterCollapse">
              <i class="fas fa-filter"></i> Filters
            </button>
          </h5>
        </div>
        <div id="filterCollapse" class="collapse">
          <div class="card-body">
            <div class="row">
              <!-- Category Filter -->
              <div class="col-md-6">
                <div class="filter-section">
                  <h6>Category</h6>
                  <select class="form-control" id="categoryFilter" style="height: 45px; padding: 8px 12px;">
                    <option value="">All Categories</option>
                    <option value="Smart Home Devices">Smart Home Devices</option>
                    <option value="Mobile & Wearable Tech">Mobile & Wearable Tech</option>
                    <option value="Computers & Peripherals">Computers & Peripherals</option>
                    <option value="Gaming & VR Gear">Gaming & VR Gear</option>
                    <option value="Audio & Entertainment Devices">Audio & Entertainment Devices</option>
                  </select>
                </div>
              </div>
              
              <!-- Price Range Filter -->
              <div class="col-md-6">
                <div class="filter-section">
                  <h6>Price Range</h6>
                  <div class="row">
                    <div class="col-md-6">
                      <label for="minPrice">Min Price (₱)</label>
                      <input type="number" class="form-control" id="minPrice" placeholder="0" min="0" step="0.01">
                    </div>
                    <div class="col-md-6">
                      <label for="maxPrice">Max Price (₱)</label>
                      <input type="number" class="form-control" id="maxPrice" placeholder="10000" min="0" step="0.01">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="row mt-3">
              <div class="col-md-12">
                <button class="btn btn-success btn-apply-filters" id="applyFiltersBtn">
                  <i class="fas fa-check"></i> Apply Filters
                </button>
                <button class="btn btn-outline-secondary ml-2" id="clearFiltersBtn">
                  <i class="fas fa-undo"></i> Clear Filters
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Data Container -->
      <div id="dataContainer"></div>
      
      <!-- Bottom Pagination -->
      <div id="paginationBarBottom" class="mt-4"></div>
    </div>
    <div class="modal fade gadget-modal" id="itemModal" role="dialog" style="display: none">
      <div class="modal-dialog modal-lg">
        <div class="modal-content gadget-modal-content">
          <div class="modal-header gadget-modal-header">
            <h4 class="modal-title" id="itemModalTitle">
              <i class="fas fa-microchip"></i> Create New Item
            </h4>
            <button type="button" class="close gadget-modal-close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body gadget-modal-body">
            <form id="iform" class="gadget-form">
              <input type="hidden" id="item_id" name="item_id" />
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="name" class="control-label gadget-label">
                      <i class="fas fa-tag"></i> Product Name
                    </label>
                    <input
                      type="text"
                      class="form-control gadget-input"
                      id="name"
                      name="name"
                      placeholder="Enter product name"
                      required
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="category" class="control-label gadget-label">
                      <i class="fas fa-list"></i> Category
                    </label>
                    <select
                      class="form-control gadget-select"
                      id="category"
                      name="category"
                      required
                      style="height: 45px; padding: 8px 12px;"
                    >
                      <option value="">Select Category</option>
                      <option value="Smart Home Devices">Smart Home Devices</option>
                      <option value="Mobile & Wearable Tech">Mobile & Wearable Tech</option>
                      <option value="Computers & Peripherals">Computers & Peripherals</option>
                      <option value="Gaming & VR Gear">Gaming & VR Gear</option>
                      <option value="Audio & Entertainment Devices">Audio & Entertainment Devices</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="form-group">
                <label for="desc" class="control-label gadget-label">
                  <i class="fas fa-info-circle"></i> Description
                </label>
                <textarea
                  class="form-control gadget-textarea"
                  id="desc"
                  name="description"
                  rows="3"
                  placeholder="Enter product description"
                  required
                ></textarea>
              </div>
              
              <div class="row">
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="cost" class="control-label gadget-label">
                      <i class="fas fa-money-bill"></i> Cost Price (₱)
                    </label>
                    <input
                      type="number"
                      step="0.01"
                      class="form-control gadget-input"
                      id="cost"
                      name="cost_price"
                      placeholder="0.00"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="sell" class="control-label gadget-label">
                      <i class="fas fa-peso-sign"></i> Sell Price (₱)
                    </label>
                    <input
                      type="number"
                      step="0.01"
                      class="form-control gadget-input"
                      id="sell"
                      name="sell_price"
                      placeholder="0.00"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    <label for="qty" class="control-label gadget-label">
                      <i class="fas fa-boxes"></i> Quantity
                    </label>
                    <input
                      type="number"
                      class="form-control gadget-input"
                      id="qty"
                      name="quantity"
                      placeholder="0"
                    />
                  </div>
                </div>
              </div>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="show_item" class="control-label gadget-label">
                      <i class="fas fa-eye"></i> Show Item
                    </label>
                    <select class="form-control gadget-select" id="show_item" name="show_item" style="height: 45px; padding: 8px 12px;">
                      <option value="yes" selected>Yes - Visible to customers</option>
                      <option value="no">No - Hidden from customers</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="img" class="control-label gadget-label">
                      <i class="fas fa-images"></i> Product Images
                    </label>
                    <input type="file" class="form-control-file gadget-file" id="img" name="images" multiple accept="image/*" />
                    <small class="form-text text-muted">Select multiple images for this product</small>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer gadget-modal-footer">
            <button type="button" class="btn gadget-btn-secondary" data-dismiss="modal">
              <i class="fas fa-times"></i> Cancel
            </button>
            <button id="itemSubmit" type="submit" class="btn gadget-btn-primary">
              <i class="fas fa-save"></i> Save Item
            </button>
            <button id="itemUpdate" type="submit" class="btn gadget-btn-primary" style="display:none;">
              <i class="fas fa-sync-alt"></i> Update Item
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
