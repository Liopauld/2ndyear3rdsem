<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.16.1/sweetalert2.css"
      integrity="sha512-fjO3Vy3QodX9c6G9AUmr6WuIaEPdGRxBjD7gjatG5gGylzYyrEq3U0q+smkG6CwIY0L8XALRFHh4KPHig0Q1ug=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.13.2/themes/ui-lightness/jquery-ui.css"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/style.css" />
    <script
      src="https://code.jquery.com/jquery-3.6.4.min.js"
      integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    
    <script
      src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.16.1/sweetalert2.min.js"
      integrity="sha512-LGHBR+kJ5jZSIzhhdfytPoEHzgaYuTRifq9g5l6ja6/k9NAOsAi5dQh4zQF6JIRB8cAYxTRedERUF+97/KuivQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script type="text/javascript" src="js/home.js"></script>
    <script src="js/auth-checker.js"></script>
    <title>GadgetEssence - Electronics & Essentials</title>
  </head>
  <body>
    <div id="header"></div>
    <script>
      $("#header").load("header.html", function() {
  if (!sessionStorage.getItem('userId')) {
    // Hide Profile menu if not logged in
    $('a.nav-link[href="profile.html"]').closest('.nav-item').hide();
    // Show Register and Login
    $('a.nav-link[href="register.html"]').closest('.nav-item').show();
    $('a.nav-link[href="login.html"]').closest('.nav-item').show();
  } else {
    // If logged in, show Profile, hide Register, change Login to Logout
    $('a.nav-link[href="profile.html"]').closest('.nav-item').show();
    $('a.nav-link[href="register.html"]').closest('.nav-item').hide();
    const $loginLink = $('a.nav-link[href="login.html"]');
    $loginLink.text('Logout').attr({ 'href': '#', 'id': 'logout-link' }).on('click', function (e) {
      e.preventDefault();
      sessionStorage.clear();
      window.location.href = 'login.html';
    });
  }
});
    </script>
    <div class="container" id="items">
      <h1 class="mb-4">
        <i class="fas fa-microchip" style="color: #00d4ff; margin-right: 15px;"></i>
        Discover Amazing Gadgets
        <small class="d-block" style="font-size: 0.6em; color: #7f8c8d; margin-top: 5px;">Electronics & Tech Essentials</small>
      </h1>
      <!-- Pagination/Infinite Scroll Toggle -->
      <div class="mb-3">
        <label><strong>View Mode:</strong></label>
        <button class="btn btn-outline-primary btn-sm ml-2" id="paginationModeBtn">Pagination</button>
        <button class="btn btn-outline-success btn-sm ml-2" id="infiniteScrollModeBtn">Infinite Scroll</button>
      </div>
      <div id="paginationBar" class="mb-3"></div>
      
      <!-- Search Bar -->
      <div class="row mb-4">
        <div class="col-md-12">
          <div class="search-container p-3">
            <div class="input-group">
              <input type="text" class="form-control" id="searchInput" placeholder="Search by name, description, or price...">
              <div class="input-group-append">
                <button class="btn btn-primary" type="button" id="searchBtn">
                  <i class="fas fa-search"></i> Search
                </button>
                <button class="btn btn-secondary" type="button" id="clearSearchBtn">
                  <i class="fas fa-times"></i> Clear
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filter-card card mb-4">
        <div class="card-header">
          <h5 class="mb-0">
            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#filterCollapse" aria-expanded="false" aria-controls="filterCollapse">
              <i class="fas fa-filter"></i> Filters
            </button>
          </h5>
        </div>
        <div id="filterCollapse" class="collapse">
          <div class="card-body">
            <div class="row">
              <!-- Price Range Filter -->
              <div class="col-md-6">
                <div class="filter-section">
                  <h6>Price Range</h6>
                  <div class="row price-inputs">
                    <div class="col-md-6">
                      <label for="minPrice">Min Price (₱)</label>
                      <input type="number" class="form-control" id="minPrice" placeholder="0" min="0" step="0.01">
                    </div>
                    <div class="col-md-6">
                      <label for="maxPrice">Max Price (₱)</label>
                      <input type="number" class="form-control" id="maxPrice" placeholder="10000" min="0" step="0.01">
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Category Filter -->
              <div class="col-md-6">
                <div class="filter-section">
                  <h6>Category</h6>
                  <select class="form-control" id="categoryFilter" style="height: 45px; padding: 8px 12px;">
                      <option value="">All Categories</option>
                      <option value="Smart Home Devices">Smart Home Devices</option>
                      <option value="Mobile & Wearable Tech">Mobile & Wearable Tech</option>
                      <option value="Computers & Peripherals">Computers & Peripherals</option>
                      <option value="Gaming & VR Gear">Gaming & VR Gear</option>
                      <option value="Audio & Entertainment Devices">Audio & Entertainment Devices</option>
                    </select>
                </div>
              </div>
            </div>
            
            <div class="row mt-3">
              <div class="col-md-12">
                <button class="btn btn-success btn-apply-filters" id="applyFiltersBtn">
                  <i class="fas fa-check"></i> Apply Filters
                </button>
                <button class="btn btn-outline-secondary ml-2" id="clearFiltersBtn">
                  <i class="fas fa-undo"></i> Clear Filters
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="itemCards"></div>
      
      <!-- Bottom Pagination -->
      <div id="paginationBarBottom" class="mt-4"></div>
    </div>

    <!-- Item Details Modal -->
    <div class="modal fade" id="itemDetailsModal" tabindex="-1" role="dialog" aria-labelledby="itemDetailsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="itemDetailsModalLabel">
              <i class="fas fa-info-circle"></i> Item Details
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="row">
              <!-- Item Details Column -->
              <div class="col-md-6">
                <div class="item-details-section">
                  <!-- Item Images Carousel -->
                  <div id="modalImageCarousel" class="carousel slide mb-3" data-ride="carousel">
                    <div class="carousel-inner" id="modalCarouselInner">
                      <!-- Images will be populated here -->
                    </div>
                    <a class="carousel-control-prev" href="#modalImageCarousel" role="button" data-slide="prev" id="modalCarouselPrev" style="display: none;">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#modalImageCarousel" role="button" data-slide="next" id="modalCarouselNext" style="display: none;">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="sr-only">Next</span>
                    </a>
                    <ol class="carousel-indicators" id="modalCarouselIndicators" style="display: none;">
                      <!-- Indicators will be populated here -->
                    </ol>
                  </div>

                  <!-- Item Information -->
                  <div class="item-info-card">
                    <h4 id="modalItemName" class="item-name mb-3"></h4>
                    <div class="item-meta mb-3">
                      <p><strong><i class="fas fa-tag"></i> Category:</strong> <span id="modalItemCategory"></span></p>
                      <p><strong><i class="fas fa-peso-sign"></i> Price:</strong> <span id="modalItemPrice" class="text-success"></span></p>
                      <p><strong><i class="fas fa-box"></i> Stock:</strong> <span id="modalItemStock"></span></p>
                    </div>
                    <div class="item-description mb-4">
                      <h6><i class="fas fa-align-left"></i> Description:</h6>
                      <p id="modalItemDescription" class="text-muted"></p>
                    </div>

                    <!-- Add to Cart Section -->
                    <div class="modal-cart-controls" id="modalCartControls">
                      <!-- Cart controls will be populated here -->
                    </div>
                  </div>
                </div>
              </div>

              <!-- Reviews Column -->
              <div class="col-md-6">
                <div class="reviews-section">
                  <h5><i class="fas fa-star"></i> Customer Reviews</h5>
                  <div id="modalReviewsContainer">
                    <!-- Reviews will be populated here -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">
              <i class="fas fa-times"></i> Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Styles -->
    <style>
      #itemDetailsModal .modal-dialog {
        max-width: 1200px;
      }

      #itemDetailsModal .modal-body {
        max-height: 80vh;
        overflow-y: auto;
      }

      .item-details-section {
        padding-right: 15px;
      }

      .reviews-section {
        padding-left: 15px;
        border-left: 1px solid #e9ecef;
        max-height: 70vh;
        overflow-y: auto;
      }

      .item-info-card {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        border: 1px solid #e9ecef;
      }

      .item-name {
        color: #2c3e50;
        font-weight: 600;
      }

      .item-meta p {
        margin-bottom: 8px;
        color: #495057;
      }

      .item-meta i {
        width: 20px;
        color: #667eea;
      }

      .item-description h6 {
        color: #495057;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .modal-cart-controls {
        background: #ffffff;
        padding: 15px;
        border-radius: 8px;
        border: 2px solid #667eea;
      }

      .review-item {
        background: #ffffff;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }

      .review-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .reviewer-name {
        font-weight: 600;
        color: #2c3e50;
      }

      .review-date {
        font-size: 0.85rem;
        color: #6c757d;
      }

      .review-rating {
        margin-bottom: 8px;
      }

      .review-rating .fa-star {
        color: #ffc107;
        margin-right: 2px;
      }

      .review-text {
        color: #495057;
        line-height: 1.5;
        margin-bottom: 0;
      }

      .no-reviews {
        text-align: center;
        padding: 40px 20px;
        color: #6c757d;
        background: #f8f9fa;
        border-radius: 8px;
        border: 2px dashed #dee2e6;
      }

      .no-reviews i {
        font-size: 3rem;
        color: #dee2e6;
        margin-bottom: 15px;
      }

      #modalImageCarousel .carousel-item img {
        width: 100%;
        height: 400px;
        object-fit: cover;
        border-radius: 8px;
      }

      /* Clickable styling for item cards */
      .gadget-card .card-img-top,
      .gadget-card .card-title {
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .gadget-card .card-img-top:hover,
      .gadget-card .card-title:hover {
        transform: scale(1.02);
      }

      .gadget-card .card-title:hover {
        color: #667eea;
      }

      /* Reviews loading */
      .reviews-loading {
        text-align: center;
        padding: 20px;
        color: #6c757d;
      }

      .reviews-loading i {
        font-size: 2rem;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </body>
</html>
